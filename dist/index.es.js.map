{"version":3,"file":"index.es.js","sources":["../src/linkedList/getNextSiblings.ts","../src/linkedList/getChildItems.ts","../src/linkedList/getItemsBetween.ts","../src/linkedList/getNextItem.ts","../src/linkedList/getNextOrChildById.ts","../src/linkedList/getChildAndNextSiblingData.ts","../src/linkedList/getLastChild.ts","../src/linkedList/upsertAndReturnRoot.ts","../src/linkedList/item.ts","../src/linkedList/validateList.ts","../src/linkedList/sortList.ts","../src/icon/arrow.ts","../src/icon/file.ts","../src/icon/text.ts","../src/icon/icons.ts","../src/icon/index.ts"],"sourcesContent":["import { Item } from \"./item\";\n\nexport function getNextSiblings<T extends Item<T, any>>(item: T): T[] {\n    if (item.nextItem) return [item.nextItem as T, ...getNextSiblings(item.nextItem) as T[]];\n    else return [];\n}","import { getNextSiblings } from \"./getNextSiblings\";\nimport { Item } from \"./item\";\n\n\nexport function getChildItems<T extends Item<T, any>>(item: T): T[] {\n    if (!item.firstChildItem) return [];\n    return [\n        item.firstChildItem as T,\n        ...getChildItems(item.firstChildItem) as T[],\n        ...getNextSiblings(item.firstChildItem).flatMap(x => [x as T, ...getChildItems<T>(x as T)])\n    ]\n}","import { Item } from \"./item\";\n\nfunction searchItems<T extends Item<T, any>>(item: T, end: T, ignoreChildren: boolean = false): T[] {\n    if (item == undefined) return [];\n    if (item.id == end.id) return [end];\n\n    const children = ignoreChildren ? [] : searchItems<T>(item.firstChildItem! as T, end);\n    if (children.slice(-1)[0]?.id == end.id) return [item, ...children];\n\n    if (item.nextItem) return [item, ...children, ...searchItems<T>(item.nextItem as T, end)];\n    if (item.parentItem) return [item, ...children, ...searchItems<T>(item.parentItem as T, end, true) as T[]].filter(x => x.id != item.parentItem!.id);\n\n    throw Error(\"Something went wrong. Please make sure that the start, and the end has a common parent\")\n\n}\n\n\nexport function getItemsBetween<T extends Item<T, any>>(start: T | undefined, end: T): T[] {\n    return searchItems(start!, end);\n}","import { Item } from \"./item\";\n\n/** The next block can either be the first child, the next sibling or the next sibling of a parent */\nexport function getNextItem<T extends Item<T, any>>(item: T, options?: { ignoreChildren: boolean }): T | undefined {\n\n    if (item.firstChildItem && options?.ignoreChildren != true) return item.firstChildItem as T;\n    if (item.nextItem) return item.nextItem as T;\n\n    function getParentNext(block: T): T | undefined {\n        if (block.nextItem) return block.nextItem as T;\n        if (block.parentItem) return getParentNext(block.parentItem as T);\n        return undefined;\n    }\n\n    return getParentNext(item)\n}","import { Item } from \"./item\";\n\nexport function getNextOrChildById<T extends Item<T, any>>(root: T, id: string): T | undefined {\n\n    function search(item: T): T | undefined {\n        if (item.id == id) return item;\n\n        let response: T | undefined;\n        if (item.firstChildItem) response ||= search(item.firstChildItem as T);\n        if (item.nextItem) response ||= search(item.nextItem as T);\n\n        return response;\n    }\n\n    return search(root)\n}","import { ItemData, ItemElement } from \"./item\";\n\nexport function getChildAndNextSiblingData<TData extends ItemData<any>, T extends ItemElement<any, T>>(item: T): TData[] {\n    if (!item) return [];\n\n    const response = [\n        item.getDetails() as TData\n    ];\n\n    if (item.firstChildItem) response.push(...getChildAndNextSiblingData<TData, T>(item.firstChildItem));\n    if (item.nextItem) response.push(...getChildAndNextSiblingData<TData, T>(item.nextItem));\n\n    return response;\n}","import { Item } from \"./item\";\n\n/** The next block can either be the first child, the next sibling or the next sibling of a parent */\nexport function getLastChild<T extends Item<T, any>>(item: T): T | undefined {\n\n    function _getLastChild(item: T | undefined): T | undefined {\n        if (item?.nextItem) return _getLastChild(item.nextItem);\n        if (item?.firstChildItem) return _getLastChild(item.firstChildItem);\n        return item;\n    }\n\n    return _getLastChild(item?.firstChildItem)\n}","import { getNextOrChildById } from \"./getNextOrChildById\";\nimport { ActionableItem, ItemData } from \"./item\";\n\n\nexport function upsertAndReturnRoot<\n    TData,\n    TItemData extends ItemData<TData>,\n    TItem extends ActionableItem<TData, TItem>,\n>(\n    data: TItemData,\n    root: TItem | undefined,\n    createItem: (data: TItemData) => TItem\n): TItem {\n    if (root == undefined && (data.parentId || data.previousId)) {\n        throw new Error(\"the initial upsert must be the root window\");\n    }\n\n    type AItem = ActionableItem<TData, AItem>;\n    let item = root && getNextOrChildById(<AItem>root, data.id);\n\n    if (item == undefined\n        || item.parentItem?.id != data.parentId\n        || item.previousItem?.id != data.previousId\n    ) {\n        if (root && item && root.id == item.id) {\n            if (item!.firstChildItem) {\n                root = <TItem>item!.firstChildItem;\n            }\n            else if (item!.nextItem) root = <TItem>item!.nextItem;\n            else throw new Error(\"Failed to render block, a new rootBlock could not be determined\");\n        }\n\n        if (item == undefined) item = createItem(data)\n        item?.remove();\n\n\n        if (root == undefined) {\n            root = <TItem>item;\n        }\n        else if (data.previousId) {\n            const previous = getNextOrChildById(<AItem>root, data.previousId);\n            if (!previous) throw new Error(\"Failed to render item, previous item is not rendered\");\n\n            previous.after(item)\n        }\n        else if (data.parentId) {\n            const parent = getNextOrChildById(<AItem>root, data.parentId);\n            if (!parent) throw new Error(\"Failed to render item, parent item is not rendered\");\n\n            parent.append(item)\n        }\n        else {\n            root.before(<TItem>item);\n            root = <TItem>item;\n        }\n    }\n\n    item.update(data.data);\n\n    return root!;\n}","import { getNextSiblings } from \"./getNextSiblings\";\n\n\nexport interface Item<TItem, TData> {\n    get id(): string,\n    get parentItem(): TItem | undefined,\n    get firstChildItem(): TItem | undefined\n    get nextItem(): TItem | undefined,\n    get previousItem(): TItem | undefined\n    get data(): TData | undefined\n}\n\nexport interface ItemData<TData> {\n    id: string,\n    parentId?: string,\n    previousId?: string,\n    data: TData\n}\n\nexport interface ActionableItem<TData, TItem extends ActionableItem<TData, TItem>> extends Item<TItem, TData> {\n    update(data: TData): void;\n\n    /**\n     * Removes the item and all its children from both the linked list, and the doom render\n     */\n    remove(): void;\n\n    /**\n    * Inserts the item after the last child\n    */\n    append(item: TItem): void;\n\n    /**\n     * Inserts the item just before this item\n     */\n    before(item: TItem): void;\n\n    /**\n     * Inserts the item just after this item\n     */\n    after(item: TItem): void;\n}\n\n/** @internal */\nexport function render(...items: ItemData<any>[]): Item<any, any>[] {\n    const itemById = items.reduce((obj, curr) => {\n        obj[curr.id] = {\n            ...curr,\n            get parentItem() { return obj[curr.parentId!] },\n            get nextItem() { return obj[items.find(x => x.previousId == curr.id)?.id!] },\n            get previousItem() { return obj[curr.previousId!] },\n            get firstChildItem() { return obj[items.find(x => x.parentId == curr.id && x.previousId == undefined)?.id!] },\n            get data() { return curr.data },\n        };\n\n        return obj\n    }, {} as { [key: string]: Item<any, any> })\n\n    return items.map(x => itemById[x.id]);\n}\n\nexport abstract class ItemElement<TData, TItem extends ItemElement<TData, TItem>>\n    implements ActionableItem<TData, TItem> {\n\n    #id: string;\n    get id(): string { return this.#id; }\n\n    #parent: TItem | undefined;\n    get parentItem(): TItem | undefined { return this.#parent }\n    // set parentItem(item: TItem | undefined) { this.#parent = item; }\n\n    #firstChild: TItem | undefined;\n    get firstChildItem(): TItem | undefined { return this.#firstChild }\n    // set firstChildItem(item: TItem | undefined) { this.#firstChild = item; }\n\n    #next: TItem | undefined;\n    get nextItem(): TItem | undefined { return this.#next }\n    // set nextItem(item: TItem | undefined) { this.#next = item; }\n\n    #previous: TItem | undefined;\n    get previousItem(): TItem | undefined { return this.#previous }\n    // set previousItem(item: TItem | undefined) { this.#previous = item; }\n\n    abstract get data(): TData\n\n    abstract update(data: TData): void;\n    abstract render(data: TData): HTMLElement;\n\n    #target: HTMLElement\n    get target(): HTMLElement { return this.#target }\n\n    getDetails(): ItemData<TData> {\n        return {\n            id: this.id,\n            parentId: this.parentItem?.id,\n            previousId: this.previousItem?.id,\n            data: this.data\n        }\n    }\n\n    remove(): void {\n        if (this.parentItem?.firstChildItem?.id == this.id) {\n            this.parentItem.#firstChild = this.#next\n        }\n\n        if (this.previousItem) {\n            this.previousItem.#next = this.#next;\n        }\n        if (this.nextItem) {\n            this.nextItem.#previous = this.#previous;\n        }\n\n        this.#parent = undefined;\n        this.#next = undefined;\n        this.#previous = undefined;\n\n        this.#target.remove();\n    }\n\n    append(item: TItem): void {\n        if (item.id == this.id)\n            throw new Error(\"Cannot append item before itself\");\n\n        item.remove();\n\n        const children = this.firstChildItem && [this.firstChildItem, ...getNextSiblings(this.firstChildItem)];\n        const lastChild = children?.slice(-1)[0];\n\n        item.#parent = this as unknown as TItem;\n\n        if (lastChild) {\n            lastChild.after(item);\n        }\n        else {\n            this.#firstChild = item;\n            this.target.append(item.target);\n        }\n    }\n\n    before(item: TItem): void {\n        if (item.id == this.id)\n            throw new Error(\"Cannot append item before itself\");\n\n        item.remove();\n\n        item.#previous = this.previousItem\n        if (this.previousItem) this.previousItem.#next = item;\n        else if (this.parentItem) this.parentItem.#firstChild = item;\n\n        item.#parent = this.parentItem;\n        item.#next = this as unknown as TItem\n        this.#previous = item;\n\n        this.target.before(item.target);\n    }\n\n    after(item: TItem): void {\n        if (item.id == this.id)\n            throw new Error(\"Cannot append item before itself\");\n\n        item.remove();\n\n        item.#next = this.nextItem;\n        if (this.nextItem) this.nextItem.#previous = item;\n\n        item.#parent = this.parentItem;\n        item.#previous = this as unknown as TItem;\n        this.#next = item;\n\n        this.target.after(item.target);\n    }\n\n    constructor(id: string, data: TData) {\n        if ((id?.trim() ?? \"\").length == 0) throw new Error(\"id is not valid\");\n\n        this.#id = id\n\n        this.#target = this.render(data);\n    }\n}","import { ItemData } from \"./item\";\n\nfunction getLength(data: ItemData<any>[], parentId?: string, previousId?: string): number {\n    const block = data.find(x => x.parentId == parentId && x.previousId == previousId);\n    if (!block) return 0;\n\n    data = data.filter(x => x.id != block.id);\n\n    return 1\n        + getLength(data, block.id, undefined)\n        + getLength(data, parentId, block.id)\n}\n\n\nexport function validateList<T extends ItemData<any>>(items: T[]): void {\n    const rootBlocks = items.filter(x => x.parentId == undefined && x.previousId == undefined);\n\n    if (rootBlocks.length != 1 && items.length > 0)\n        throw new Error(\"Failed to determine the start of the linked list\");\n\n    const ids = items.map(x => x.id);\n    const idDuplicated = ids.some((x, i, a) => a.indexOf(x) != i);\n    if (idDuplicated)\n        throw new Error(\"Found duplicated instances of ids\");\n\n    const prevIds = items.map(x => x.previousId + \"_\" + x.parentId);\n    const prevIdDuplicated = prevIds.some((x, i, a) => a.indexOf(x) != i);\n    if (prevIdDuplicated)\n        throw new Error(\"Some of the items have the same previousId\");\n\n\n    if (getLength(items) != items.length) \n        throw new Error(\"Linked list is not valid\")\n}\n","import { ItemData } from \"./item\";\nimport { validateList } from \"./validateList\";\n\n\nfunction sort<T extends ItemData<any>>(items: T[], parentId: string | undefined, previousId: string | undefined) : T[]{\n    const item = items.find(x => x.parentId == parentId && x.previousId == previousId);\n    if (!item) return [];\n\n    items = items.filter(x => x.id != item.id);\n\n    return [\n        item,\n        ...sort(items, item.id, undefined),\n        ...sort(items, parentId, item.id)\n    ];\n}\n\nexport function sortList<T extends ItemData<any>>(items: T[]): T[] {\n    validateList(items);\n    return sort(items, undefined, undefined)\n}\n\n\n","import { IconElement } from \".\";\n\nfunction getChevronRight(): IconElement {\n    // https://www.untitledui.com/free-icons/arrows\n\n    const svg = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\n    svg.setAttribute(\"width\", \"100%\");\n    svg.setAttribute(\"height\", \"100%\");\n    svg.setAttribute(\"viewBox\", \"0 0 24 24\");\n    svg.setAttribute(\"fill\", \"none\");\n\n    const path = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n    path.setAttribute(\"d\", \"M9 18L15 12L9 6\");\n    path.setAttribute(\"stroke\", \"currentColor\");\n    path.setAttribute(\"stroke-width\", \"2\");\n    path.setAttribute(\"stroke-linecap\", \"round\");\n    path.setAttribute(\"stroke-linejoin\", \"round\");\n\n    svg.appendChild(path);\n\n    return svg;\n}\n\nfunction getChevronDown(): IconElement {\n    // https://www.untitledui.com/free-icons/arrows\n\n    const svg = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\n    svg.setAttribute(\"width\", \"100%\");\n    svg.setAttribute(\"height\", \"100%\");\n    svg.setAttribute(\"viewBox\", \"0 0 24 24\");\n    svg.setAttribute(\"fill\", \"none\");\n    \n    const path = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n    path.setAttribute(\"d\", \"M6 9L12 15L18 9\");\n    path.setAttribute(\"stroke\", \"currentColor\");\n    path.setAttribute(\"stroke-width\", \"2\");\n    path.setAttribute(\"stroke-linecap\", \"round\");\n    path.setAttribute(\"stroke-linejoin\", \"round\");\n    \n    svg.appendChild(path);\n\n    return svg;\n}\n\n\n\nexport const ArrowIcons = {\n    \"arrow-chevron-right\": getChevronRight,\n    \"arrow-chevron-down\": getChevronDown,\n}","import { IconElement } from \".\";\n\n\nfunction getFileDocument(): IconElement {\n    // https://www.untitledui.com/free-icons\n\n    const svg = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\n    svg.setAttribute(\"width\", \"100%\");\n    svg.setAttribute(\"height\", \"100%\");\n    svg.setAttribute(\"viewBox\", \"0 0 24 24\");\n    svg.setAttribute(\"fill\", \"none\");\n\n    const path = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n    path.setAttribute(\"d\", \"M14 2.26953V6.40007C14 6.96012 14 7.24015 14.109 7.45406C14.2049 7.64222 14.3578 7.7952 14.546 7.89108C14.7599 8.00007 15.0399 8.00007 15.6 8.00007H19.7305M16 13H8M16 17H8M10 9H8M14 2H8.8C7.11984 2 6.27976 2 5.63803 2.32698C5.07354 2.6146 4.6146 3.07354 4.32698 3.63803C4 4.27976 4 5.11984 4 6.8V17.2C4 18.8802 4 19.7202 4.32698 20.362C4.6146 20.9265 5.07354 21.3854 5.63803 21.673C6.27976 22 7.11984 22 8.8 22H15.2C16.8802 22 17.7202 22 18.362 21.673C18.9265 21.3854 19.3854 20.9265 19.673 20.362C20 19.7202 20 18.8802 20 17.2V8L14 2Z\");\n    path.setAttribute(\"stroke\", \"currentColor\");\n    path.setAttribute(\"stroke-width\", \"2\");\n    path.setAttribute(\"stroke-linecap\", \"round\");\n    path.setAttribute(\"stroke-linejoin\", \"round\");\n\n    svg.appendChild(path);\n\n    return svg\n}\n\n\nexport const FileIcons = {\n    \"file-document\": getFileDocument\n}","import { IconElement } from \".\";\n\nfunction getTextBold(): IconElement {\n    const svg = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\n    svg.setAttribute(\"xmlns\", \"http://www.w3.org/2000/svg\");\n    svg.setAttribute(\"width\", \"16\");\n    svg.setAttribute(\"height\", \"16\");\n    svg.setAttribute(\"fill\", \"currentColor\");\n    svg.setAttribute(\"class\", \"bi bi-type-bold\");\n    svg.setAttribute(\"viewBox\", \"0 0 16 16\");\n\n    const path = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n    path.setAttribute(\"d\", \"M8.21 13c2.106 0 3.412-1.087 3.412-2.823 0-1.306-.984-2.283-2.324-2.386v-.055a2.176 2.176 0 0 0 1.852-2.14c0-1.51-1.162-2.46-3.014-2.46H3.843V13zM5.908 4.674h1.696c.963 0 1.517.451 1.517 1.244 0 .834-.629 1.32-1.73 1.32H5.908V4.673zm0 6.788V8.598h1.73c1.217 0 1.88.492 1.88 1.415 0 .943-.643 1.449-1.832 1.449H5.907z\");\n\n    svg.appendChild(path);\n\n    return svg;\n}\n\nfunction getTextItalic(): IconElement {\n    const svg = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\n    svg.setAttribute(\"xmlns\", \"http://www.w3.org/2000/svg\");\n    svg.setAttribute(\"width\", \"16\");\n    svg.setAttribute(\"height\", \"16\");\n    svg.setAttribute(\"fill\", \"currentColor\");\n    svg.setAttribute(\"class\", \"bi bi-type-italic\");\n    svg.setAttribute(\"viewBox\", \"0 0 16 16\");\n\n    const path = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n    path.setAttribute(\"d\", \"M7.991 11.674 9.53 4.455c.123-.595.246-.71 1.347-.807l.11-.52H7.211l-.11.52c1.06.096 1.128.212 1.005.807L6.57 11.674c-.123.595-.246.71-1.346.806l-.11.52h3.774l.11-.52c-1.06-.095-1.129-.211-1.006-.806z\");\n\n    svg.appendChild(path);\n\n    return svg;\n}\n\nfunction getTextUnderline(): IconElement {\n    const svg = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\n    svg.setAttribute(\"xmlns\", \"http://www.w3.org/2000/svg\");\n    svg.setAttribute(\"width\", \"16\");\n    svg.setAttribute(\"height\", \"16\");\n    svg.setAttribute(\"fill\", \"currentColor\");\n    svg.setAttribute(\"class\", \"bi bi-type-underline\");\n    svg.setAttribute(\"viewBox\", \"0 0 16 16\");\n\n    const path = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n    path.setAttribute(\"d\", \"M5.313 3.136h-1.23V9.54c0 2.105 1.47 3.623 3.917 3.623s3.917-1.518 3.917-3.623V3.136h-1.23v6.323c0 1.49-.978 2.57-2.687 2.57s-2.687-1.08-2.687-2.57zM12.5 15h-9v-1h9z\");\n\n    svg.appendChild(path);\n\n    return svg;\n}\n\nexport const TextIcons = {\n    \"text-bold\": getTextBold,\n    \"text-italic\": getTextItalic,\n    \"text-underline\": getTextUnderline,\n}\n\n","import { ArrowIcons } from \"./arrow\";\nimport { FileIcons } from \"./file\";\nimport { TextIcons } from \"./text\";\n\nexport const Icons = {\n    ...TextIcons,\n    ...ArrowIcons,\n    ...FileIcons,\n} \n","import { Icons } from \"./icons\";\n\nexport interface IconElement\n    extends SVGElement {\n}\n\nexport type IconTypes = keyof typeof Icons\n\nexport function getIcon(type: IconTypes): IconElement {\n    return Icons[type]();\n}"],"names":["getNextSiblings","item","getChildItems","x","searchItems","end","ignoreChildren","_a","children","getItemsBetween","start","getNextItem","options","getParentNext","block","getNextOrChildById","root","id","search","response","getChildAndNextSiblingData","getLastChild","_getLastChild","upsertAndReturnRoot","data","createItem","_b","previous","parent","_id","_parent","_firstChild","_next","_previous","_target","ItemElement","__privateAdd","__privateSet","__privateGet","lastChild","getLength","parentId","previousId","validateList","items","i","a","sort","sortList","getChevronRight","svg","path","getChevronDown","ArrowIcons","getFileDocument","FileIcons","getTextBold","getTextItalic","getTextUnderline","TextIcons","Icons","getIcon","type"],"mappings":"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"}